<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta charset="utf-8">
  <title>
    
      OpenCV Daily : Day 2 &ndash;
    
    Sukeesh
  </title>

  <meta name="author" content="Sukeesh" />
  <meta name="description" content="Software Developer and Metallurgy undergrad at IIT Roorkee" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link href="/favicon.png" rel="shortcut icon">
  <link rel="alternate" type="application/rss+xml" href="/atom.xml" />

  <link rel="stylesheet" href="/css/pygments.css" type="text/css" />
  <link rel="stylesheet" href="/css/pure.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="/css/base.css" type="text/css" media="screen, projection" />
  <script type="text/javascript" src="/js/application.js"></script>
  <meta name="google-site-verification" content="re_t7ja4IZq6BYH_gOXHam-1xYP0BMy5qiUygvzYW6U" />
</head>

<body ontouchstart="" class="blog">
  
  <section class="pure-g-r">
    <div class='pure-u-1-2 content'>

      <section class="navigation">
  <div class="holder">
    VS
    <div class="nav">
      <a href="/">Home</a> <br>
      <a href="/blog">Blog</a> <br>
      <a href="/about">About</a> <br>
      <a href="/projects">Projects</a> <br>
    </div>
  </div>
</section>


      <section class="post">
  <div class="back">
    <a href="/blog">&larr; Back</a>
  </div>


  <h1 class="title">
    <a href="/archive/2017/OpenCVDailyDay2.html">OpenCV Daily : Day 2</a>
  </h1>

  <section class="byline">
    February  9, 2017
  </section>

  <blockquote>
  <p><strong>Images are Matrices</strong></p>
</blockquote>

<p>We have an image, which is 300x300 pixels.</p>

<p><img src="/images/posts/opencv/day2/sf.jpg" alt="Sanf" /></p>

<p>Images can be read in Octave using <em>imread</em> function</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="n">im</span> <span class="o">=</span> <span class="nb">imread</span><span class="p">(</span><span class="s1">'sf.jpg'</span><span class="p">);</span></code></pre></figure>

<p>Now, let’s select the green channel of the above image using the below command</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="n">imgreen</span> <span class="o">=</span> <span class="n">im</span><span class="p">(:,:,</span><span class="mi">2</span><span class="p">);</span>  <span class="p">//</span> <span class="err">"</span><span class="p">:</span><span class="err">"</span> <span class="n">represents</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">cells</span> <span class="n">in</span> <span class="n">that</span> <span class="n">row</span><span class="p">/</span><span class="n">column</span></code></pre></figure>

<p>Now, let’s see how this image looks.</p>

<p><strong>Note</strong> : Images are displayed using <em>imshow()</em> function</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="n">imshow</span><span class="p">(</span><span class="n">imgreen</span><span class="p">);</span></code></pre></figure>

<p><img src="/images/posts/opencv/day2/sfg.jpg" alt="GSanf" /></p>

<p>Now, let us see the intensity values of the 300th row using <em>plot</em> in-built function</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="nb">plot</span><span class="p">(</span><span class="n">imgreen</span><span class="p">(</span><span class="mi">300</span><span class="p">,:));</span></code></pre></figure>

<p><img src="/images/posts/opencv/day2/plotLine.png" alt="Plot" /></p>

<hr />

<blockquote>
  <p><strong>How do we find intensity of a particular pixel/row/column?</strong></p>
</blockquote>

<p>As we know that the image can be represented as matrix, assuming it as an 2D array, we can get the intenisty at xth row, yth column by <em>im(x, y)</em></p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="o">&gt;&gt;</span> <span class="nb">disp</span><span class="p">(</span><span class="n">im</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span><span class="mi">32</span><span class="p">));</span>
<span class="mi">156</span></code></pre></figure>

<p>For an entire row,</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="nb">disp</span><span class="p">(</span><span class="n">im</span><span class="p">(</span><span class="mi">23</span><span class="p">,:));</span></code></pre></figure>

<p>For an entire column,</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="nb">disp</span><span class="p">(</span><span class="n">im</span><span class="p">(:,</span><span class="mi">32</span><span class="p">));</span></code></pre></figure>

<p>For rows and columns, the return type is <em>vector</em> of values.</p>

<hr />

<blockquote>
  <p><strong>Cropping an image</strong></p>
</blockquote>

<p>The size of the image is 300x300. Let’s say we want to crop an image of size 100x100 ranging from (100-&gt;200)x(200-&gt;300)</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="n">cropped</span> <span class="o">=</span> <span class="n">im</span><span class="p">(</span><span class="mi">100</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">:</span><span class="mi">300</span><span class="p">);</span>
<span class="n">imshow</span><span class="p">(</span><span class="n">cropped</span><span class="p">);</span></code></pre></figure>

<p><img src="/images/posts/opencv/day2/crop.png" alt="CroppedImage" /></p>

<hr />

<blockquote>
  <p><strong>What do arithmetic operations on images look like?</strong></p>
</blockquote>

<p><strong>Addition:</strong></p>

<p>Let’s start by adding two images. Pixels in one image gets added to corresponding pixels in other image. Since the two images are of same size, we can just sum two images using “+” operator.</p>

<p>I have loaded a new dolphin image.</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="n">dol</span> <span class="o">=</span> <span class="nb">imread</span><span class="p">(</span><span class="n">dl</span><span class="o">.</span><span class="n">jpg</span><span class="p">);</span>
<span class="nb">sum</span> <span class="o">=</span> <span class="n">dol</span> <span class="o">+</span> <span class="n">im</span><span class="p">;</span>
<span class="n">imshow</span><span class="p">(</span><span class="nb">sum</span><span class="p">);</span></code></pre></figure>

<p>which results in</p>

<p><img src="/images/posts/opencv/day2/sum.png" alt="Sum" /></p>

<p>which looks dirty</p>

<p>That’s because when two corresponding intensities of a pixel is maximum ( i.e., 255 ), both adds up to 2 * 255 = 510, Which will be truncated to 255. So, one way to avoid this is by averaging. Something like below.</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="n">dol</span> <span class="o">=</span> <span class="nb">imread</span><span class="p">(</span><span class="n">dl</span><span class="o">.</span><span class="n">jpg</span><span class="p">);</span>
<span class="n">avg</span> <span class="o">=</span> <span class="n">dol</span><span class="p">/</span><span class="mi">2</span> <span class="o">+</span> <span class="n">im</span><span class="p">/</span><span class="mi">2</span><span class="p">;</span>
<span class="n">imshow</span><span class="p">(</span><span class="n">avg</span><span class="p">);</span></code></pre></figure>

<p><img src="/images/posts/opencv/day2/avg.png" alt="Avg" /></p>

<p><em>Neat!!</em></p>

<p><strong>Subtraction:</strong></p>

<p>To preserve image difference</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="n">out</span> <span class="o">=</span> <span class="p">(</span><span class="n">dol</span> <span class="o">-</span> <span class="n">im</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">im</span> <span class="o">-</span> <span class="n">dol</span><span class="p">);</span></code></pre></figure>

<p>Better way: Use image package</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="n">pkg</span> <span class="nb">load</span> <span class="nb">image</span><span class="p">;</span>

<span class="n">imabsdiff</span><span class="p">(</span><span class="n">dl</span><span class="p">,</span> <span class="n">im</span><span class="p">);</span> <span class="c1">% order doesn't matter</span></code></pre></figure>

<p><strong>Multiply by a scalar:</strong></p>

<p>Try this yourself.</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="k">function</span> <span class="n">result</span> <span class="o">=</span> <span class="n">scale</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
	<span class="n">result</span> <span class="o">=</span> <span class="n">value</span> <span class="o">.*</span> <span class="n">img</span><span class="p">;</span>
<span class="n">endfunction</span>

<span class="n">dolphin</span> <span class="o">=</span> <span class="nb">imread</span><span class="p">(</span><span class="s1">'dl.jpg'</span><span class="p">);</span>

<span class="n">imshow</span><span class="p">(</span><span class="n">scale</span><span class="p">(</span><span class="n">dolphin</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">));</span></code></pre></figure>

<p>Mutiplying by a value &gt;1 increases the intensity of that picture!</p>

<hr />

<blockquote>
  <p><strong>Blending two images</strong></p>
</blockquote>

<p>Let’s say we want more of dolphin and less of Golden gate bridge in the picture.</p>

<p>We can do something like this</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="n">avg</span> <span class="o">=</span> <span class="n">dol</span> <span class="o">*</span> <span class="mf">0.75</span> <span class="o">+</span> <span class="n">im</span> <span class="o">*</span> <span class="mf">0.25</span><span class="p">;</span>
<span class="n">imshow</span><span class="p">(</span><span class="n">avg</span><span class="p">);</span></code></pre></figure>

<p>Note that weight of dolphin has been increased while that of <em>im</em> has been decreased to maintain the total value of weights to be 1.
This is done because to maintain the same intensity that of original images.</p>

<p>So, in general the function for blending two images will be:</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="c1">% Blend two images</span>
<span class="k">function</span> <span class="n">output</span> <span class="o">=</span> <span class="n">blend</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="nb">alpha</span><span class="p">)</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="nb">alpha</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">alpha</span> <span class="p">);</span>
<span class="n">endfunction</span></code></pre></figure>

<p>This method of obtaining the weighted sum of two images is the basis of <em>alpha-blending</em>.</p>

<hr />

<blockquote>
  <p><strong>Noise in images</strong></p>
</blockquote>

<ul>
  <li>Noise is just another function that is combined with the original function to get a new <em>guess what</em> function</li>
</ul>

<p align="left"><img align="left" src="https://tex.s2cms.ru/svg/%5Cvec%7BI'%7D(x%2C%20y)%20%3D%20%5Cvec%7BI%7D(x%2C%20y)%20%2B%20%7B%5Cvec%7Bn_%7D%7D%7B(x%2Cy)%7D" alt="\vec{I'}(x, y) = \vec{I}(x, y) + {\vec{n_}}{(x,y)}" /></p>
<p align="center"><img align="center" src="https://tex.s2cms.ru/svg/%7B%5Cvec%7Bn_%7D%7D%7B(x%2Cy)%7D" alt="{\vec{n_}}{(x,y)}" /> is a noise function.</p>

<p><strong>Common types of noise</strong></p>

<ul>
  <li><strong>Salt and pepper noise</strong>: random occurences of black and white pixels</li>
  <li><strong>Impulse noise</strong>: random occurences of white pixels</li>
  <li><strong>Gaussian noise</strong>: variations in intensity drawn from a Gaussian normal distribution</li>
</ul>

<p><strong>Gaussian noise</strong>:</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="n">noise</span> <span class="o">=</span> <span class="nb">randn</span><span class="p">(</span><span class="nb">size</span><span class="p">(</span><span class="n">im</span><span class="p">))</span> <span class="o">.*</span><span class="n">sigma</span><span class="p">;</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">im</span> <span class="o">+</span> <span class="n">noise</span><span class="p">;</span></code></pre></figure>



  <div class="twitter">
    <a href="http://twitter.com/share" class="twitter-share-button" data-count="none" data-via="sukeeshbabu">Tweet</a>
    <a href="http://twitter.com/sukeeshbabu" class="twitter-follow-button" data-show-count="false">Follow @sukeeshbabu</a>
  </div>

  <section class="meta">
    <section class="copy">
      <p>
        Some boring lines about the writer: <br>
      </p>
      <p>
        Knows a bit of PHP, JS, Py. Prefers Py. <a href='http://news.ycombinator.com' target='_blank'>HN</a> addict. Watches cricket.
      </p>
      <p>
        Follow him on <a href='http://twitter.com/sukeeshbabu'>twitter</a>. He doesn't tweet a lot. Bummer, right?
      </p>

      <script src="//platform.twitter.com/widgets.js" type="text/javascript"></script>
    </section>
  </section>
</section>

    </div>
  </section>
  
  


  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-73546079-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</body>

</html>
